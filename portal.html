<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus V12 | Showroom Exclusivo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --primary: #00f2ff;
            --bg: #050505;
            --card-bg: #111;
            --text: #ffffff;
        }
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding-bottom: 50px;
        }
        header {
            padding: 60px 20px;
            text-align: center;
            background: radial-gradient(circle at center, #1a1a1a, #050505);
            border-bottom: 1px solid #222;
        }
        h1 { font-style: italic; letter-spacing: 8px; font-size: 3rem; margin: 0; text-transform: uppercase; }
        h1 span { color: var(--primary); text-shadow: 0 0 20px rgba(0, 242, 255, 0.5); }
        header p { color: #888; letter-spacing: 2px; margin-top: 10px; }
        
        .container { max-width: 1300px; margin: auto; padding: 40px 20px; }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 40px;
        }

        /* Card de Luxo */
        .car-card {
            background: var(--card-bg);
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid #222;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        .car-card:hover { 
            border-color: var(--primary); 
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        }
        
        /* Área da Imagem com Transição Suave */
        .car-img {
            height: 280px;
            background-size: cover;
            background-position: center;
            transition: background-image 0.8s ease-in-out; /* Efeito de crossfade */
            position: relative;
        }

        /* Overlay para destacar o texto */
        .car-img::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to top, rgba(17,17,17,1), transparent);
        }

        .car-info { padding: 30px; position: relative; z-index: 2; }
        .car-info h3 { margin: 0; font-size: 1.6rem; letter-spacing: 1px; }
        .car-price { color: var(--primary); font-size: 2rem; font-weight: 800; margin: 15px 0; }
        
        .btn-interesse {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 18px;
            background: var(--primary);
            color: black;
            text-align: center;
            text-decoration: none;
            font-weight: 800;
            border-radius: 12px;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-interesse:hover { 
            background: white; 
            box-shadow: 0 0 30px var(--primary);
        }

        /* Indicador de fotos (bolinhas) */
        .photo-dots {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
            z-index: 10;
        }
        .dot {
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transition: 0.3s;
        }
        .dot.active { background: var(--primary); width: 15px; border-radius: 10px; }
    </style>
</head>
<body>

    <header>
        <h1>NEXUS <span>V12</span></h1>
        <p>EXPERIÊNCIA AUTOMOTIVA PREMIUM</p>
    </header>

    <div class="container">
        <div id="showroom-publico" class="grid"></div>
    </div>

    <script>
        const AppState = {
            carros: JSON.parse(localStorage.getItem("nexus_v12_carros") || "[]")
        };

        function renderPortal() {
            const container = document.getElementById("showroom-publico");
            const carrosAtivos = AppState.carros.filter(c => c.status !== 'vendido');

            if (carrosAtivos.length === 0) {
                container.innerHTML = "<p style='text-align:center; grid-column: 1/-1; color: #555;'>O estoque está sendo atualizado. Volte em breve.</p>";
                return;
            }

            container.innerHTML = carrosAtivos.map((c, i) => `
                <div class="car-card" data-index="${i}" data-foto-ativa="0">
                    <div class="photo-dots">
                        ${c.fotos.map((_, idx) => `<div class="dot ${idx === 0 ? 'active' : ''}"></div>`).join('')}
                    </div>
                    <div class="car-img" style="background-image: url('${c.fotos[0] || ''}')"></div>
                    <div class="car-info">
                        <h3>${c.modelo}</h3>
                        <p class="car-price">R$ ${c.preco.toLocaleString('pt-BR')}</p>
                        <a href="https://wa.me/5511999999999?text=Olá! Tenho interesse no ${c.modelo} que vi no portal." 
                           target="_blank" class="btn-interesse">
                           <i class="fab fa-whatsapp"></i> Negociar Agora
                        </a>
                    </div>
                </div>
            `).join('');
        }

        function iniciarTrocaFotos() {
            setInterval(() => {
                document.querySelectorAll('.car-card').forEach(card => {
                    const carIdx = card.dataset.index;
                    const carro = AppState.carros.filter(c => c.status !== 'vendido')[carIdx];
                    
                    if (carro && carro.fotos.length > 1) {
                        let atual = parseInt(card.dataset.fotoAtiva);
                        let proxima = (atual + 1) % carro.fotos.length;
                        
                        // Atualiza a imagem
                        const imgDiv = card.querySelector('.car-img');
                        imgDiv.style.backgroundImage = `url('${carro.fotos[proxima]}')`;
                        
                        // Atualiza as bolinhas (dots)
                        const dots = card.querySelectorAll('.dot');
                        dots.forEach((dot, idx) => {
                            dot.classList.toggle('active', idx === proxima);
                        });

                        card.dataset.fotoAtiva = proxima;
                    }
                });
            }, 4000); // Troca a cada 4 segundos
        }

        // Iniciar
        renderPortal();
        iniciarTrocaFotos();
    </script>
</body>
</html>